<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>IslandoraFedoraAPI: FedoraApiM Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">IslandoraFedoraAPI
   &#160;<span id="projectnumber">1.1</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.2 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="classFedoraApiM-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">FedoraApiM Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>This class implements the Fedora API-M interface.  
 <a href="classFedoraApiM.html#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a7f9e5cd46ba7994fa162203a4bdc4b48"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classFedoraApiM.html#a7f9e5cd46ba7994fa162203a4bdc4b48">__construct</a> (<a class="el" href="classRepositoryConnection.html">RepositoryConnection</a> $connection, <a class="el" href="classFedoraApiSerializer.html">FedoraApiSerializer</a> $serializer)</td></tr>
<tr class="memdesc:a7f9e5cd46ba7994fa162203a4bdc4b48"><td class="mdescLeft">&#160;</td><td class="mdescRight">Constructor for the new <a class="el" href="classFedoraApiM.html" title="This class implements the Fedora API-M interface.">FedoraApiM</a> object.  <a href="#a7f9e5cd46ba7994fa162203a4bdc4b48"></a><br/></td></tr>
<tr class="separator:a7f9e5cd46ba7994fa162203a4bdc4b48"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9c150977002a861da1b469ef693ee0ce"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classFedoraApiM.html#a9c150977002a861da1b469ef693ee0ce">addDatastream</a> ($pid, $dsid, $type, $file, $params)</td></tr>
<tr class="memdesc:a9c150977002a861da1b469ef693ee0ce"><td class="mdescLeft">&#160;</td><td class="mdescRight">Add a new datastream to a fedora object.  <a href="#a9c150977002a861da1b469ef693ee0ce"></a><br/></td></tr>
<tr class="separator:a9c150977002a861da1b469ef693ee0ce"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ada1fdb4d34c7a71bee63707c40cec187"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classFedoraApiM.html#ada1fdb4d34c7a71bee63707c40cec187">addRelationship</a> ($pid, $relationship, $is_literal, $datatype=NULL)</td></tr>
<tr class="memdesc:ada1fdb4d34c7a71bee63707c40cec187"><td class="mdescLeft">&#160;</td><td class="mdescRight">Add a RDF relationship to a Fedora object.  <a href="#ada1fdb4d34c7a71bee63707c40cec187"></a><br/></td></tr>
<tr class="separator:ada1fdb4d34c7a71bee63707c40cec187"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a01095046bd6da7987456a110c6d23db9"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classFedoraApiM.html#a01095046bd6da7987456a110c6d23db9">export</a> ($pid, $params=array())</td></tr>
<tr class="memdesc:a01095046bd6da7987456a110c6d23db9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Export a Fedora object with the given PID.  <a href="#a01095046bd6da7987456a110c6d23db9"></a><br/></td></tr>
<tr class="separator:a01095046bd6da7987456a110c6d23db9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a79bc5d83df14ab032a8273058158e4b2"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classFedoraApiM.html#a79bc5d83df14ab032a8273058158e4b2">getDatastream</a> ($pid, $dsid, $params=array())</td></tr>
<tr class="memdesc:a79bc5d83df14ab032a8273058158e4b2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns information about the datastream.  <a href="#a79bc5d83df14ab032a8273058158e4b2"></a><br/></td></tr>
<tr class="separator:a79bc5d83df14ab032a8273058158e4b2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a571cd0dfeda2931e8d0f700d4fa1a420"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classFedoraApiM.html#a571cd0dfeda2931e8d0f700d4fa1a420">getDatastreamHistory</a> ($pid, $dsid)</td></tr>
<tr class="memdesc:a571cd0dfeda2931e8d0f700d4fa1a420"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get information on the different versions of a datastream that are avilable in Fedora.  <a href="#a571cd0dfeda2931e8d0f700d4fa1a420"></a><br/></td></tr>
<tr class="separator:a571cd0dfeda2931e8d0f700d4fa1a420"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afc17c58003f60cf93a55104b6cd8b1f1"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classFedoraApiM.html#afc17c58003f60cf93a55104b6cd8b1f1">getNextPid</a> ($namespace=NULL, $numpids=NULL)</td></tr>
<tr class="memdesc:afc17c58003f60cf93a55104b6cd8b1f1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get a new unused PID.  <a href="#afc17c58003f60cf93a55104b6cd8b1f1"></a><br/></td></tr>
<tr class="separator:afc17c58003f60cf93a55104b6cd8b1f1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a033d5ad763f89d53afb64cd34a895318"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classFedoraApiM.html#a033d5ad763f89d53afb64cd34a895318">getObjectXml</a> ($pid)</td></tr>
<tr class="memdesc:a033d5ad763f89d53afb64cd34a895318"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the Fedora Objects XML (Foxml)  <a href="#a033d5ad763f89d53afb64cd34a895318"></a><br/></td></tr>
<tr class="separator:a033d5ad763f89d53afb64cd34a895318"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa17f154a97a0f263594c097bfaf47ed4"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classFedoraApiM.html#aa17f154a97a0f263594c097bfaf47ed4">getRelationships</a> ($pid, $relationship=array())</td></tr>
<tr class="memdesc:aa17f154a97a0f263594c097bfaf47ed4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Query relationships for a particular fedora object.  <a href="#aa17f154a97a0f263594c097bfaf47ed4"></a><br/></td></tr>
<tr class="separator:aa17f154a97a0f263594c097bfaf47ed4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8361e858211497e3a1ce7b1a9e175e36"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classFedoraApiM.html#a8361e858211497e3a1ce7b1a9e175e36">ingest</a> ($params=array())</td></tr>
<tr class="memdesc:a8361e858211497e3a1ce7b1a9e175e36"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create a new object in Fedora.  <a href="#a8361e858211497e3a1ce7b1a9e175e36"></a><br/></td></tr>
<tr class="separator:a8361e858211497e3a1ce7b1a9e175e36"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa0929d682061d00342e7d46d45d16c52"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classFedoraApiM.html#aa0929d682061d00342e7d46d45d16c52">modifyDatastream</a> ($pid, $dsid, $params=array())</td></tr>
<tr class="memdesc:aa0929d682061d00342e7d46d45d16c52"><td class="mdescLeft">&#160;</td><td class="mdescRight">Update a datastream.  <a href="#aa0929d682061d00342e7d46d45d16c52"></a><br/></td></tr>
<tr class="separator:aa0929d682061d00342e7d46d45d16c52"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aee75e216c52cdff55525eacc68bfa251"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classFedoraApiM.html#aee75e216c52cdff55525eacc68bfa251">modifyObject</a> ($pid, $params=NULL)</td></tr>
<tr class="memdesc:aee75e216c52cdff55525eacc68bfa251"><td class="mdescLeft">&#160;</td><td class="mdescRight">Update Fedora Object parameters.  <a href="#aee75e216c52cdff55525eacc68bfa251"></a><br/></td></tr>
<tr class="separator:aee75e216c52cdff55525eacc68bfa251"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a21d6ddc0a3b144031963af54bad8c626"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classFedoraApiM.html#a21d6ddc0a3b144031963af54bad8c626">purgeDatastream</a> ($pid, $dsid, $params=array())</td></tr>
<tr class="memdesc:a21d6ddc0a3b144031963af54bad8c626"><td class="mdescLeft">&#160;</td><td class="mdescRight">Purge a datastream from from Fedora.  <a href="#a21d6ddc0a3b144031963af54bad8c626"></a><br/></td></tr>
<tr class="separator:a21d6ddc0a3b144031963af54bad8c626"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9aa50d7c593a95a4cbf53a68022de418"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classFedoraApiM.html#a9aa50d7c593a95a4cbf53a68022de418">purgeObject</a> ($pid, $log_message=NULL)</td></tr>
<tr class="memdesc:a9aa50d7c593a95a4cbf53a68022de418"><td class="mdescLeft">&#160;</td><td class="mdescRight">Purge an object.  <a href="#a9aa50d7c593a95a4cbf53a68022de418"></a><br/></td></tr>
<tr class="separator:a9aa50d7c593a95a4cbf53a68022de418"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aca32b6b40b6d62f56c61c3535d312947"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classFedoraApiM.html#aca32b6b40b6d62f56c61c3535d312947">validate</a> ($pid, $as_of_date_time=NULL)</td></tr>
<tr class="memdesc:aca32b6b40b6d62f56c61c3535d312947"><td class="mdescLeft">&#160;</td><td class="mdescRight">Validate an object.  <a href="#aca32b6b40b6d62f56c61c3535d312947"></a><br/></td></tr>
<tr class="separator:aca32b6b40b6d62f56c61c3535d312947"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5911ac7657ae2a80d176fd88d8223271"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a5911ac7657ae2a80d176fd88d8223271"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>upload</b> ($file)</td></tr>
<tr class="separator:a5911ac7657ae2a80d176fd88d8223271"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>This class implements the Fedora API-M interface. </p>
<p>This is a light wrapper around the Fedora interface. Very little attempt is put into putting things into native PHP datastructures.</p>
<p>See this page for more information: <a href="https://wiki.duraspace.org/display/FEDORA35/REST+API">https://wiki.duraspace.org/display/FEDORA35/REST+API</a> </p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a7f9e5cd46ba7994fa162203a4bdc4b48"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">FedoraApiM::__construct </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classRepositoryConnection.html">RepositoryConnection</a>&#160;</td>
          <td class="paramname"><em>$connection</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classFedoraApiSerializer.html">FedoraApiSerializer</a>&#160;</td>
          <td class="paramname"><em>$serializer</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Constructor for the new <a class="el" href="classFedoraApiM.html" title="This class implements the Fedora API-M interface.">FedoraApiM</a> object. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype"><a class="el" href="classRepositoryConnection.html" title="Specific RepositoryConfig implementation that extends the CurlConnection class so that we can do spec...">RepositoryConnection</a></td><td class="paramname">$connection</td><td>Takes the Respository Connection object for the Respository this API should connect to. </td></tr>
    <tr><td class="paramtype"><a class="el" href="classFedoraApiSerializer.html" title="A class to Serialize the XML responses from Fedora into PHP arrays.">FedoraApiSerializer</a></td><td class="paramname">$serializer</td><td>Takes the serializer object to that will be used to serialze the XML Fedora returns. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="a9c150977002a861da1b469ef693ee0ce"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">FedoraApiM::addDatastream </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$pid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$dsid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$file</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$params</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Add a new datastream to a fedora object. </p>
<p>The datastreams are sent to Fedora using a multipart post if a string or file is provided otherwise Fedora will go out and fetch the URL</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$pid</td><td>Persistent identifier of the digital object. </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$dsid</td><td>Datastream identifier. </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$type</td><td>This parameter tells the function what type of arguement is given for file. It must be one of:<ul>
<li>string: The datastream is passed as a string.</li>
<li>file: The datastream is contained in a file.</li>
<li>url: The datastream is located at a URL, which is passed as a string. this is the only option that can be used for R and E type datastreams. </li>
</ul>
</td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$file</td><td>This parameter depends on what is selected for $type.<ul>
<li>string: A string containing the datastream.</li>
<li>file: A string containing the file name that contains the datastream. The file name must be a full path.</li>
<li>url: A string containing the publically accessable URL that the datastream is located at. </li>
</ul>
</td></tr>
    <tr><td class="paramtype"></td><td class="paramname">array()</td><td>$params (optional) An array that can have one or more of the following elements:<ul>
<li>controlGroup: one of "X", "M", "R", or "E" (Inline *X*ML, *M*anaged Content, *R*edirect, or *E*xternal Referenced). Default: X.</li>
<li>altIDs: alternate identifiers for the datastream. A space seperated list of alternate identifiers for the datastream.</li>
<li>dsLabel: the label for the datastream.</li>
<li>versionable: enable versioning of the datastream (boolean).</li>
<li>dsState: one of "A", "I", "D" (*A*ctive, *I*nactive, *D*eleted).</li>
<li>formatURI: the format URI of the datastream.</li>
<li>checksumType: the algorithm used to compute the checksum. One of DEFAULT, DISABLED, MD5, SHA-1, SHA-256, SHA-385, SHA-512.</li>
<li>checksum: the value of the checksum represented as a hexadecimal string.</li>
<li>mimeType: the MIME type of the content being added, this overrides the Content-Type request header.</li>
<li>logMessage: a message describing the activity being performed.</li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname"><a class="el" href="classRepositoryException.html" title="The top level exception for the Islandora Fedora API.">RepositoryException</a></td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>array() Returns an array describing the new datastream. This is the same array returned by getDatastream. This may also contain an dsAltID key, that contains any alternate ids if any are specified. <div class="fragment"><div class="line">Array</div>
<div class="line">(</div>
<div class="line">    [dsLabel] =&gt;</div>
<div class="line">    [dsVersionID] =&gt; test.3</div>
<div class="line">    [dsCreateDate] =&gt; 2012-03-07T18:03:38.679Z</div>
<div class="line">    [dsState] =&gt; A</div>
<div class="line">    [dsMIME] =&gt; text/xml</div>
<div class="line">    [dsFormatURI] =&gt;</div>
<div class="line">    [dsControlGroup] =&gt; M</div>
<div class="line">    [dsSize] =&gt; 22</div>
<div class="line">    [dsVersionable] =&gt; <span class="keyword">true</span></div>
<div class="line">    [dsInfoType] =&gt;</div>
<div class="line">    [dsLocation] =&gt; islandora:strict_pdf+test+test.3</div>
<div class="line">    [dsLocationType] =&gt; INTERNAL_ID</div>
<div class="line">    [dsChecksumType] =&gt; DISABLED</div>
<div class="line">    [dsChecksum] =&gt; none</div>
<div class="line">    [dsLogMessage] =&gt;</div>
<div class="line">)</div>
</div><!-- fragment --></dd></dl>
<dl class="section see"><dt>See Also</dt><dd><a class="el" href="classFedoraApiM.html#a79bc5d83df14ab032a8273058158e4b2" title="Returns information about the datastream.">FedoraApiM::getDatastream</a> </dd></dl>

</div>
</div>
<a class="anchor" id="ada1fdb4d34c7a71bee63707c40cec187"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">FedoraApiM::addRelationship </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$pid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$relationship</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$is_literal</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$datatype</em> = <code>NULL</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Add a RDF relationship to a Fedora object. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$pid</td><td>Persistent identifier of the digital object. </td></tr>
    <tr><td class="paramtype">array</td><td class="paramname">$relationship</td><td>An array containing the subject, predicate and object for the relationship.<ul>
<li>subject: (optional) Subject of the relationship. Either a URI for the object or one of its datastreams. If none is given then the URI for the current object is used.</li>
<li>predicate: Predicate of the relationship.</li>
<li>object: Object of the relationship. </li>
</ul>
</td></tr>
    <tr><td class="paramtype">boolean</td><td class="paramname">$is_literal</td><td>true if the object of the relationship is a literal, false if it is a URI </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$datatype</td><td>(optional) if the object is a literal, the datatype of the literal.</td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname"><a class="el" href="classRepositoryException.html" title="The top level exception for the Islandora Fedora API.">RepositoryException</a></td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See Also</dt><dd><a class="el" href="classFedoraApiM.html#aa17f154a97a0f263594c097bfaf47ed4" title="Query relationships for a particular fedora object.">FedoraApiM::getRelationships</a> </dd>
<dd>
FedoraApiM::purgeRelationships </dd></dl>

</div>
</div>
<a class="anchor" id="a01095046bd6da7987456a110c6d23db9"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">FedoraApiM::export </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$pid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$params</em> = <code>array()</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Export a Fedora object with the given PID. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$pid</td><td>Persistent identifier of the digital object. </td></tr>
    <tr><td class="paramtype">array</td><td class="paramname">$params</td><td>(optional) An array that can have one or more of the following elements:<ul>
<li>format: The XML format to export. One of info:fedora/fedora-system:FOXML-1.1 (default), info:fedora/fedora-system:FOXML-1.0, info:fedora/fedora-system:METSFedoraExt-1.1, info:fedora/fedora-system:METSFedoraExt-1.0, info:fedora/fedora-system:ATOM-1.1, info:fedora/fedora-system:ATOMZip-1.1</li>
<li>context: The export context, which determines how datastream URLs and content are represented. Options: public (default), migrate, archive.</li>
<li>encoding: The preferred encoding of the exported XML.</li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname"><a class="el" href="classRepositoryException.html" title="The top level exception for the Islandora Fedora API.">RepositoryException</a></td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>string A string containing the requested XML. </dd></dl>

</div>
</div>
<a class="anchor" id="a79bc5d83df14ab032a8273058158e4b2"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">FedoraApiM::getDatastream </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$pid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$dsid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$params</em> = <code>array()</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns information about the datastream. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$pid</td><td>Persistent identifier of the digital object. </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$dsid</td><td>Datastream identifier. </td></tr>
    <tr><td class="paramtype">array</td><td class="paramname">$params</td><td>(optional) An array that can have one or more of the following elements:<ul>
<li>asOfDateTime: Indicates that the result should be relative to the digital object as it existed on the given date.</li>
<li>validateChecksum: verifies that the Datastream content has not changed since the checksum was initially computed.</li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname"><a class="el" href="classRepositoryException.html" title="The top level exception for the Islandora Fedora API.">RepositoryException</a></td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>array() An array containing information about the datastream. This may also contains a key dsAltID which contains alternate ids if any are specified. <div class="fragment"><div class="line">Array</div>
<div class="line">(</div>
<div class="line">    [dsLabel] =&gt;</div>
<div class="line">    [dsVersionID] =&gt; test.3</div>
<div class="line">    [dsCreateDate] =&gt; 2012-03-07T18:03:38.679Z</div>
<div class="line">    [dsState] =&gt; A</div>
<div class="line">    [dsMIME] =&gt; text/xml</div>
<div class="line">    [dsFormatURI] =&gt;</div>
<div class="line">    [dsControlGroup] =&gt; M</div>
<div class="line">    [dsSize] =&gt; 22</div>
<div class="line">    [dsVersionable] =&gt; <span class="keyword">true</span></div>
<div class="line">    [dsInfoType] =&gt;</div>
<div class="line">    [dsLocation] =&gt; islandora:strict_pdf+test+test.3</div>
<div class="line">    [dsLocationType] =&gt; INTERNAL_ID</div>
<div class="line">    [dsChecksumType] =&gt; DISABLED</div>
<div class="line">    [dsChecksum] =&gt; none</div>
<div class="line">    [dsChecksumValid] =&gt; <span class="keyword">true</span></div>
<div class="line">)</div>
</div><!-- fragment --> </dd></dl>

</div>
</div>
<a class="anchor" id="a571cd0dfeda2931e8d0f700d4fa1a420"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">FedoraApiM::getDatastreamHistory </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$pid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$dsid</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get information on the different versions of a datastream that are avilable in Fedora. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$pid</td><td>Persistent identifier of the digital object. </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$dsid</td><td>Datastream identifier.</td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname"><a class="el" href="classRepositoryException.html" title="The top level exception for the Islandora Fedora API.">RepositoryException</a></td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>array Returns a indexed array with the same keys as getDatastream. <div class="fragment"><div class="line">Array</div>
<div class="line">(</div>
<div class="line">    [0] =&gt; Array</div>
<div class="line">        (</div>
<div class="line">            [dsLabel] =&gt;</div>
<div class="line">            [dsVersionID] =&gt; test.3</div>
<div class="line">            [dsCreateDate] =&gt; 2012-03-07T18:03:38.679Z</div>
<div class="line">            [dsState] =&gt; A</div>
<div class="line">            [dsMIME] =&gt; text/xml</div>
<div class="line">            [dsFormatURI] =&gt;</div>
<div class="line">            [dsControlGroup] =&gt; M</div>
<div class="line">            [dsSize] =&gt; 22</div>
<div class="line">            [dsVersionable] =&gt; <span class="keyword">true</span></div>
<div class="line">            [dsInfoType] =&gt;</div>
<div class="line">            [dsLocation] =&gt; islandora:strict_pdf+test+test.3</div>
<div class="line">            [dsLocationType] =&gt; INTERNAL_ID</div>
<div class="line">            [dsChecksumType] =&gt; DISABLED</div>
<div class="line">            [dsChecksum] =&gt; none</div>
<div class="line">        )</div>
<div class="line"></div>
<div class="line">    [1] =&gt; Array</div>
<div class="line">        (</div>
<div class="line">            [dsLabel] =&gt;</div>
<div class="line">            [dsVersionID] =&gt; test.2</div>
<div class="line">            [dsCreateDate] =&gt; 2012-03-07T18:03:13.722Z</div>
<div class="line">            [dsState] =&gt; A</div>
<div class="line">            [dsMIME] =&gt; text/xml</div>
<div class="line">            [dsFormatURI] =&gt;</div>
<div class="line">            [dsControlGroup] =&gt; M</div>
<div class="line">            [dsSize] =&gt; 22</div>
<div class="line">            [dsVersionable] =&gt; <span class="keyword">true</span></div>
<div class="line">            [dsInfoType] =&gt;</div>
<div class="line">            [dsLocation] =&gt; islandora:strict_pdf+test+test.2</div>
<div class="line">            [dsLocationType] =&gt; INTERNAL_ID</div>
<div class="line">            [dsChecksumType] =&gt; DISABLED</div>
<div class="line">            [dsChecksum] =&gt; none</div>
<div class="line">        )</div>
<div class="line"></div>
<div class="line">)</div>
</div><!-- fragment --></dd></dl>
<dl class="section see"><dt>See Also</dt><dd><a class="el" href="classFedoraApiM.html#a79bc5d83df14ab032a8273058158e4b2" title="Returns information about the datastream.">FedoraApiM::getDatastream</a> </dd></dl>

</div>
</div>
<a class="anchor" id="afc17c58003f60cf93a55104b6cd8b1f1"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">FedoraApiM::getNextPid </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$namespace</em> = <code>NULL</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$numpids</em> = <code>NULL</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get a new unused PID. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$namespace</td><td>The namespace to get the PID in. This defaults to default namespace of the repository. This should not contain the PID seperator, for example it should be islandora not islandora:. </td></tr>
    <tr><td class="paramtype">int</td><td class="paramname">$numpids</td><td>The number of pids being requested.</td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname"><a class="el" href="classRepositoryException.html" title="The top level exception for the Islandora Fedora API.">RepositoryException</a></td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>array/string If one pid is requested it is returned as a string. If multiple pids are requested they they are returned in an array containg strings. <div class="fragment"><div class="line">Array</div>
<div class="line">(</div>
<div class="line">    [0] =&gt; test:7</div>
<div class="line">    [1] =&gt; test:8</div>
<div class="line">)</div>
</div><!-- fragment --> </dd></dl>

</div>
</div>
<a class="anchor" id="a033d5ad763f89d53afb64cd34a895318"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">FedoraApiM::getObjectXml </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$pid</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the Fedora Objects XML (Foxml) </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$pid</td><td>Persistent identifier of the digital object.</td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname"><a class="el" href="classRepositoryException.html" title="The top level exception for the Islandora Fedora API.">RepositoryException</a></td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>string A string containing the objects foxml</dd></dl>
<dl class="section see"><dt>See Also</dt><dd><a class="el" href="classFedoraApiM.html#a01095046bd6da7987456a110c6d23db9" title="Export a Fedora object with the given PID.">FedoraApiM::export</a> </dd></dl>

</div>
</div>
<a class="anchor" id="aa17f154a97a0f263594c097bfaf47ed4"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">FedoraApiM::getRelationships </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$pid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$relationship</em> = <code>array()</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Query relationships for a particular fedora object. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$pid</td><td>Persistent identifier of the digital object. </td></tr>
    <tr><td class="paramtype">array</td><td class="paramname">$relationship</td><td>(Optional) An array defining the relationship:<ul>
<li>subject: subject of the relationship(s). Either a URI for the object or one of its datastreams. defaults to the URI of the object.</li>
<li>predicate: predicate of the relationship(s), if missing returns all predicates.</li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname"><a class="el" href="classRepositoryException.html" title="The top level exception for the Islandora Fedora API.">RepositoryException</a></td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>array An indexed array with all the relationships. <div class="fragment"><div class="line">Array</div>
<div class="line">(</div>
<div class="line">    [0] =&gt; Array</div>
<div class="line">        (</div>
<div class="line">            [subject] =&gt; islandora:strict_pdf</div>
<div class="line">            [predicate] =&gt; Array</div>
<div class="line">                (</div>
<div class="line">                    [predicate] =&gt; hasModel</div>
<div class="line">                    [uri] =&gt; info:fedora/fedora-system:def/model#</div>
<div class="line">                    [alias] =&gt;</div>
<div class="line">                )</div>
<div class="line"></div>
<div class="line">            [<span class="keywordtype">object</span>] =&gt; Array</div>
<div class="line">                (</div>
<div class="line">                    [literal] =&gt; FALSE</div>
<div class="line">                    [value] =&gt; fedora-system:<a class="code" href="classFedoraObject.html" title="Represents a Fedora Object.">FedoraObject</a>-3.0</div>
<div class="line">                )</div>
<div class="line"></div>
<div class="line">        )</div>
<div class="line"></div>
<div class="line">    [1] =&gt; Array</div>
<div class="line">        (</div>
<div class="line">            [subject] =&gt; islandora:strict_pdf</div>
<div class="line">            [predicate] =&gt; Array</div>
<div class="line">                (</div>
<div class="line">                    [predicate] =&gt; bar</div>
<div class="line">                    [uri] =&gt; http:<span class="comment">//woot/foo#</span></div>
<div class="line">                    [alias] =&gt;</div>
<div class="line">                )</div>
<div class="line"></div>
<div class="line">            [<span class="keywordtype">object</span>] =&gt; Array</div>
<div class="line">                (</div>
<div class="line">                    [literal] =&gt; TRUE</div>
<div class="line">                    [value] =&gt; thedude</div>
<div class="line">                )</div>
<div class="line"></div>
<div class="line">        )</div>
<div class="line"></div>
<div class="line">)</div>
</div><!-- fragment --> </dd></dl>

</div>
</div>
<a class="anchor" id="a8361e858211497e3a1ce7b1a9e175e36"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">FedoraApiM::ingest </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$params</em> = <code>array()</code></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Create a new object in Fedora. </p>
<p>This could be ingesting a XML file as a string or a file. Executing this request with no XML file content will result in the creation of a new, empty object (with either the specified PID or a system-assigned PID). The new object will contain only a minimal DC datastream specifying the dc:identifier of the object.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">array</td><td class="paramname">$params</td><td>(optional) An array that can have one or more of the following elements:<ul>
<li>pid: persistent identifier of the object to be created. If this is not supplied then either a new PID will be created for this object or the PID to be used is encoded in the XML included as the body of the request</li>
<li>string: The XML file defining the new object as a string</li>
<li>file: The XML file defining the new object as a string containing the full path to the XML file. This must not be used with the string parameter</li>
<li>label: the label of the new object</li>
<li>format: the XML format of the object to be ingested. One of info:fedora/fedora-system:FOXML-1.1, info:fedora/fedora-system:FOXML-1.0, info:fedora/fedora-system:METSFedoraExt-1.1, info:fedora/fedora-system:METSFedoraExt-1.0, info:fedora/fedora-system:ATOM-1.1, info:fedora/fedora-system:ATOMZip-1.1</li>
<li>encoding: the encoding of the XML to be ingested. If this is specified, and given as anything other than UTF-8, you must ensure that the same encoding is declared in the XML.</li>
<li>namespace: The namespace to be used to create a PID for a new empty object: if a 'string' parameter is included with the request, the namespace parameter is ignored.</li>
<li>ownerId: the id of the user to be listed at the object owner.</li>
<li>logMessage: a message describing the activity being performed.</li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname"><a class="el" href="classRepositoryException.html" title="The top level exception for the Islandora Fedora API.">RepositoryException</a></td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>string The PID of the newly created object.</dd></dl>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000007">Todo:</a></b></dt><dd>This function is a problem in Fedora &lt; 3.5 where ownerId does not properly get set. <a href="https://jira.duraspace.org/browse/FCREPO-963">https://jira.duraspace.org/browse/FCREPO-963</a>. We should deal with this. </dd></dl>

</div>
</div>
<a class="anchor" id="aa0929d682061d00342e7d46d45d16c52"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">FedoraApiM::modifyDatastream </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$pid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$dsid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$params</em> = <code>array()</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Update a datastream. </p>
<p>Either changing its metadata, updaing the datastream contents or both.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$pid</td><td>Persistent identifier of the digital object. </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$dsid</td><td>Datastream identifier. </td></tr>
    <tr><td class="paramtype">array</td><td class="paramname">$params</td><td>(optional) An array that can have one or more of the following elements:<ul>
<li>dsFile: String containing the full path to a file that will be used as the new contents of the datastream.</li>
<li>dsString: String containing the new contents of the datastream.</li>
<li>dsLocation: String containing a URL to fetch the new datastream from. Only ONE of dsFile, dsString or dsLocation should be used.</li>
<li>altIDs: alternate identifiers for the datastream. This is a space seperated string of alternate identifiers for the datastream.</li>
<li>dsLabel: the label for the datastream.</li>
<li>versionable: enable versioning of the datastream.</li>
<li>dsState: one of "A", "I", "D" (*A*ctive, *I*nactive, *D*eleted)</li>
<li>formatURI: the format URI of the datastream</li>
<li>checksumType: the algorithm used to compute the checksum. This has to be one of: DEFAULT, DISABLED, MD5, SHA-1, SHA-256, SHA-384, SHA-512. If this parameter is given and no checksum is given the checksum will be computed.</li>
<li>checksum: the value of the checksum represented as a hexadecimal string. This checksum must be computed by the algorithm defined above.</li>
<li>mimeType: the MIME type of the content being added, this overrides the Content-Type request header.</li>
<li>logMessage: a message describing the activity being performed</li>
<li>lastModifiedDate: date/time of the last (known) modification to the datastream, if the actual last modified date is later, a 409 response is returned. This can be used for opportunistic object locking.</li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname"><a class="el" href="classRepositoryException.html" title="The top level exception for the Islandora Fedora API.">RepositoryException</a></td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>array An array contianing information about the updated datastream. This array is the same as the array returned by getDatastream.</dd></dl>
<dl class="section see"><dt>See Also</dt><dd><a class="el" href="classFedoraApiM.html#a79bc5d83df14ab032a8273058158e4b2" title="Returns information about the datastream.">FedoraApiM::getDatastream</a> </dd></dl>

</div>
</div>
<a class="anchor" id="aee75e216c52cdff55525eacc68bfa251"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">FedoraApiM::modifyObject </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$pid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$params</em> = <code>NULL</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Update Fedora Object parameters. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$pid</td><td>Persistent identifier of the digital object. </td></tr>
    <tr><td class="paramtype">array</td><td class="paramname">$params</td><td>(optional) An array that can have one or more of the following elements:<ul>
<li>label: object label.</li>
<li>ownerId: the id of the user to be listed at the object owner.</li>
<li>state: the new object state - *A*ctive, *I*nactive, or *D*eleted.</li>
<li>logMessage: a message describing the activity being performed.</li>
<li>lastModifiedDate: date/time of the last (known) modification to the datastream, if the actual last modified date is later, a 409 response is returned. This can be used for opportunistic object locking.</li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname"><a class="el" href="classRepositoryException.html" title="The top level exception for the Islandora Fedora API.">RepositoryException</a></td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>string A string containg the timestamp of the object modification. </dd></dl>

</div>
</div>
<a class="anchor" id="a21d6ddc0a3b144031963af54bad8c626"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">FedoraApiM::purgeDatastream </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$pid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$dsid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$params</em> = <code>array()</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Purge a datastream from from Fedora. </p>
<p>This perminatly removes the datastream and all its associated data.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$pid</td><td>Persistent identifier of the digital object. </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$dsid</td><td>Datastream identifier </td></tr>
    <tr><td class="paramtype">array</td><td class="paramname">$params</td><td>(optional) An array that can have one or more of the following elements:<ul>
<li>startDT: the (inclusive) start date-time stamp of the range. If not specified, this is taken to be the lowest possible value, and thus, the entire version history up to the endDT will be purged.</li>
<li>endDT: the (inclusive) ending date-time stamp of the range. If not specified, this is taken to be the greatest possible value, and thus, the entire version history back to the startDT will be purged.</li>
<li>logMessage: a message describing the activity being performed.</li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname"><a class="el" href="classRepositoryException.html" title="The top level exception for the Islandora Fedora API.">RepositoryException</a></td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>array An array containing the timestamps of the datastreams that were removed. <div class="fragment"><div class="line">Array</div>
<div class="line">(</div>
<div class="line">    [0] =&gt; 2012-03-08T18:44:15.214Z</div>
<div class="line">    [1] =&gt; 2012-03-08T18:44:15.336Z</div>
<div class="line">)</div>
</div><!-- fragment --> </dd></dl>

</div>
</div>
<a class="anchor" id="a9aa50d7c593a95a4cbf53a68022de418"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">FedoraApiM::purgeObject </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$pid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$log_message</em> = <code>NULL</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Purge an object. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$pid</td><td>Persistent identifier of the digital object. </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$log_message</td><td>(optional) A message describing the activity being performed.</td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname"><a class="el" href="classRepositoryException.html" title="The top level exception for the Islandora Fedora API.">RepositoryException</a></td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>string Timestamp when object was deleted. </dd></dl>

</div>
</div>
<a class="anchor" id="aca32b6b40b6d62f56c61c3535d312947"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">FedoraApiM::validate </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$pid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$as_of_date_time</em> = <code>NULL</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Validate an object. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$pid</td><td>Persistent identifier of the digital object. </td></tr>
    <tr><td class="paramtype">array</td><td class="paramname">$as_of_date_time</td><td>(optional) Indicates that the result should be relative to the digital object as it existed at the given date and time. Defaults to the most recent version.</td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname"><a class="el" href="classRepositoryException.html" title="The top level exception for the Islandora Fedora API.">RepositoryException</a></td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>array An array containing the validation results. <div class="fragment"><div class="line">Array</div>
<div class="line">(</div>
<div class="line">    [valid] =&gt; <span class="keyword">false</span></div>
<div class="line">    [contentModels] =&gt; Array</div>
<div class="line">        (</div>
<div class="line">            [0] =&gt; <span class="stringliteral">&quot;info:fedora/fedora-system:FedoraObject-3.0&quot;</span></div>
<div class="line">        )</div>
<div class="line">    [problems] =&gt; Array</div>
<div class="line">        (</div>
<div class="line">            [0] =&gt; <span class="stringliteral">&quot;Problem description&quot;</span></div>
<div class="line">        )</div>
<div class="line">    [datastreamProblems] =&gt; Array</div>
<div class="line">        (</div>
<div class="line">            [dsid] =&gt; Array</div>
<div class="line">            (</div>
<div class="line">                [0] =&gt; <span class="stringliteral">&quot;Problem description&quot;</span></div>
<div class="line">            )</div>
<div class="line">        )</div>
<div class="line">)</div>
</div><!-- fragment --> </dd></dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li><a class="el" href="FedoraApi_8php.html">FedoraApi.php</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Tue Mar 12 2013 14:50:44 for IslandoraFedoraAPI by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.2
</small></address>
</body>
</html>
